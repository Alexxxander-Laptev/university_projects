NAME LAB_1
EXTERN CODE (LAB_1, OUTPUT, MULT, PARAMS, SUMM)
EXTERN data (A_BYTE_1, A_BYTE_2, A_BYTE_3, B_BYTE_1, B_BYTE_2, B_BYTE_3, FIRST_MULT_RESULT_1, FIRST_MULT_RESULT_2, FIRST_MULT_RESULT_3, SECOND_MULT_RESULT_1, SECOND_MULT_RESULT_2, SECOND_MULT_RESULT_3, THIRD_MULT_RESULT_1, THIRD_MULT_RESULT_2, THIRD_MULT_RESULT_3, FIRST_BYTE_ADDRESS, SECOND_BYTE_ADDRESS, THIRD_BYTE_ADDRESS, SUMM_1, SUMM_2, SUMM_3, SUMM_4, SUMM_5, SUMM_6)
MAIN SEGMENT CODE
CSEG AT 0
PROG	SEGMENT	CODE
CONST	SEGMENT	CODE
STACK	SEGMENT	IDATA
RSEG  STACK
	DS    10H 
	CSEG  AT   0
	USING	0  
JMP start

start:
; явхршбюел дюммше хг бмеьмеи оюлърх
MOV DPTR, #A_BYTE_1
MOVX A, @DPTR
MOV R1, A
MOV DPTR, #A_BYTE_2
MOVX A, @DPTR
MOV R2, A
MOV DPTR, #A_BYTE_3
MOVX A, @DPTR
MOV R3, A

; явхршбюел брнпне вхякн онаюирмн хг онпрю P2
MOV R4, P2
MOV R5, P2
MOV R6, P2

; оепемняхл лкюдьхе аюирш дкъ слмнфемхъ
MOV A, R6
MOV R7, A
; бшгшбюел ондопнцпюллс дкъ слмнфемхъ ноепюмднб
CALL MULT
MOV R0, #FIRST_BYTE_ADDRESS
MOV A, @R0
MOV R0, #FIRST_MULT_RESULT_1
MOV @R0, A

MOV R0, #SECOND_BYTE_ADDRESS
MOV A, @R0
MOV R0, #FIRST_MULT_RESULT_2
MOV @R0, A

MOV R0, #THIRD_BYTE_ADDRESS
MOV A, @R0
MOV R0, #FIRST_MULT_RESULT_3
MOV @R0, A

MOV R0, #FIRST_BYTE_ADDRESS - 1
MOV A, @R0
MOV R0, #FIRST_MULT_RESULT_1 - 1
MOV @R0, A

; оепемняхл япедмхе аюирш дкъ слмнфемхъ
MOV A, R5
MOV R7, A
; бшгшбюел ондопнцпюллс дкъ слмнфемхъ ноепюмднб
CALL MULT
MOV R0, #FIRST_BYTE_ADDRESS
MOV A, @R0
MOV R0, #SECOND_MULT_RESULT_1
MOV @R0, A

MOV R0, #SECOND_BYTE_ADDRESS
MOV A, @R0
MOV R0, #SECOND_MULT_RESULT_2
MOV @R0, A

MOV R0, #THIRD_BYTE_ADDRESS
MOV A, @R0
MOV R0, #SECOND_MULT_RESULT_3
MOV @R0, A

MOV R0, #FIRST_BYTE_ADDRESS - 1
MOV A, @R0
MOV R0, #SECOND_MULT_RESULT_1 - 1
MOV @R0, A

; оепемняхл ярюпьхе аюирш дкъ слмнфемхъ
MOV A, R4
MOV R7, A
; бшгшбюел ондопнцпюллс дкъ слмнфемхъ ноепюмднб
CALL MULT
MOV R0, #FIRST_BYTE_ADDRESS
MOV A, @R0
MOV R0, #THIRD_MULT_RESULT_1
MOV @R0, A

MOV R0, #SECOND_BYTE_ADDRESS
MOV A, @R0
MOV R0, #THIRD_MULT_RESULT_2
MOV @R0, A

MOV R0, #THIRD_BYTE_ADDRESS
MOV A, @R0
MOV R0, #THIRD_MULT_RESULT_3
MOV @R0, A

MOV R0, #FIRST_BYTE_ADDRESS - 1
MOV A, @R0
MOV R0, #THIRD_MULT_RESULT_1 - 1
MOV @R0, A

;ясллхпсел ярнкахйх
CALL SUMM

;UART
MOV TMOD, #00100000B
MOV TH1, #0FDH
SETB TR1
MOV PCON, #01011100B
MOV SCON, #01010010B
MOV R0, #SUMM_1
MOV A, @R0
CALL OUTPUT
MOV R0, #SUMM_2
MOV A, @R0
CALL OUTPUT
MOV R0, #SUMM_3
MOV A, @R0
CALL OUTPUT
MOV R0, #SUMM_4
MOV A, @R0
CALL OUTPUT
MOV R0, #SUMM_5
MOV A, @R0
CALL OUTPUT
MOV R0, #SUMM_6
MOV A, @R0
CALL OUTPUT

LJMP start

END 



















































































